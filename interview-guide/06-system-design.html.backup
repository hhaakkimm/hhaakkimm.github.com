<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Design - Interview Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 2rem;
        }

        h2 {
            color: #764ba2;
            margin: 2rem 0 1rem;
            font-size: 1.5rem;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 0.5rem;
        }

        h3 {
            color: #667eea;
            margin: 1.5rem 0 0.5rem;
            font-size: 1.2rem;
        }

        p,
        li {
            line-height: 1.8;
            color: #333;
            margin-bottom: 0.5rem;
        }

        ul,
        ol {
            margin-left: 2rem;
        }

        code {
            background: #f5f5f5;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
        }

        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .back-btn {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 1.5rem;
        }

        .back-btn:hover {
            background: #764ba2;
        }

        .tip {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div class="container">
        <a href="index.html" class="back-btn">â† Back to Index</a>

        <h1>ğŸ— System Design & Architecture</h1>

        <h2>System Design Interview Approach</h2>

        <h3>Framework (UseRESO)</h3>
        <ol>
            <li><strong>Requirements:</strong> Clarify functional and non-functional requirements</li>
            <li><strong>Estimation:</strong> Calculate scale (users, QPS, storage)</li>
            <li><strong>System Interface:</strong> Define APIs</li>
            <li><strong>Overall Design:</strong> High-level architecture diagram</li>
        </ol>

        <h3>Key Questions to Ask</h3>
        <ul>
            <li>How many users/requests per second?</li>
            <li>Read vs write ratio?</li>
            <li>Consistency vs availability requirements?</li>
            <li>Latency requirements?</li>
            <li>Data retention policies?</li>
        </ul>

        <h2>Design: Vulnerability Management Platform</h2>

        <h3>Requirements</h3>
        <ul>
            <li><strong>Functional:</strong>
                <ul>
                    <li>Ingest vulnerability data from 150+ security tools</li>
                    <li>Normalize and deduplicate findings</li>
                    <li>Risk-based prioritization</li>
                    <li>Workflow automation for remediation</li>
                    <li>Real-time dashboards and reporting</li>
                </ul>
            </li>
            <li><strong>Non-Functional:</strong>
                <ul>
                    <li>High availability (99.9% uptime)</li>
                    <li>Handle 1M+ vulnerability records</li>
                    <li>Support 10K concurrent users</li>
                    <li>Sub-second query response times</li>
                    <li>Data retained for 2 years</li>
                </ul>
            </li>
        </ul>

        <h3>Architecture Diagram</h3>
        <pre>                         Users (Web/API)
                                 â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  Load Balancer â”‚
                         â”‚   (ALB/Nginx)  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Django Web    â”‚       â”‚   Django API   â”‚
            â”‚   (Frontend)   â”‚       â”‚    (REST)      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                            â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  Redis   â”‚                              â”‚  Message    â”‚
    â”‚  Cache   â”‚                              â”‚  Queue      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚ (RabbitMQ)  â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                              â”‚   Celery    â”‚
                                              â”‚   Workers   â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  MySQL   â”‚                                      â”‚ SingleStore â”‚
    â”‚ (OLTP)   â”‚                                      â”‚  (Analytics)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              Data Ingestion Layer                     â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”         â”‚
    â”‚  â”‚Tool1â”‚  â”‚Tool2â”‚  â”‚Tool3â”‚   ...   â”‚150+ â”‚         â”‚
    â”‚  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜         â””â”€â”€â”¬â”€â”€â”˜         â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
    â”‚              API Gateway / Lambda                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>

        <h3>Components Explained</h3>
        <ul>
            <li><strong>API Gateway:</strong> Receive data from security tools</li>
            <li><strong>Message Queue:</strong> Buffer ingestion spikes</li>
            <li><strong>Celery Workers:</strong> Process, normalize, deduplicate data</li>
            <li><strong>MySQL:</strong> Operational data (users, workflows, current state)</li>
            <li><strong>SingleStore:</strong> Analytics, historical trends, aggregations</li>
            <li><strong>Redis:</strong> Session management, caching, real-time counters</li>
        </ul>

        <h2>Scalability Patterns</h2>

        <h3>Horizontal Scaling</h3>
        <ul>
            <li>Add more web servers behind load balancer</li>
            <li>Stateless application design</li>
            <li>Database read replicas</li>
            <li>Sharding for write scaling</li>
        </ul>

        <h3>Caching Strategy</h3>
        <ul>
            <li><strong>Cache-Aside:</strong> Application manages cache
                <pre>def get_vulnerability(vuln_id):
    # Check cache first
    data = cache.get(f'vuln:{vuln_id}')
    if data:
        return data
    
    # Cache miss - query database
    data = db.query("SELECT * FROM vulnerabilities WHERE id = %s", vuln_id)
    cache.set(f'vuln:{vuln_id}', data, ttl=3600)
    return data</pre>
            </li>
            <li><strong>Write-Through:</strong> Update cache and database together</li>
            <li><strong>Cache Invalidation:</strong> Time-based (TTL) vs event-driven</li>
        </ul>

        <h3>Database Optimization</h3>
        <ul>
            <li><strong>Indexing:</strong> B-tree, Hash, Full-text</li>
            <li><strong>Partitioning:</strong> Range (by date), Hash (by ID), List</li>
            <li><strong>Read Replicas:</strong> Async replication for reads</li>
            <li><strong>Connection Pooling:</strong> Reuse database connections</li>
        </ul>

        <h2>Microservices Architecture</h2>

        <h3>When to Use</h3>
        <ul>
            <li>Large team (multiple squads)</li>
            <li>Different scaling needs per component</li>
            <li>Independent deployment requirements</li>
            <li>Polyglot programming needs</li>
        </ul>

        <h3>Example Microservices</h3>
        <ul>
            <li><strong>Ingestion Service:</strong> Collect data from tools</li>
            <li><strong>Normalization Service:</strong> Transform to unified format</li>
            <li><strong>Scoring Service:</strong> Calculate risk scores</li>
            <li><strong>Workflow Service:</strong> Handle remediation automation</li>
            <li><strong>Notification Service:</strong> Alerts and emails</li>
            <li><strong>Reporting Service:</strong> Generate analytics</li>
        </ul>

        <h3>Communication Patterns</h3>
        <ul>
            <li><strong>Synchronous:</strong> REST, gRPC</li>
            <li><strong>Asynchronous:</strong> Message queues (RabbitMQ, Kafka)</li>
            <li><strong>Event-Driven:</strong> Publish-subscribe pattern</li>
        </ul>

        <h2>API Design</h2>

        <h3>RESTful Endpoints</h3>
        <pre>GET    /api/v1/vulnerabilities          # List all
GET    /api/v1/vulnerabilities/:id       # Get one
POST   /api/v1/vulnerabilities           # Create
PATCH  /api/v1/vulnerabilities/:id       # Update
DELETE /api/v1/vulnerabilities/:id       # Delete

GET    /api/v1/vulnerabilities?severity=CRITICAL&status=open
GET    /api/v1/vulnerabilities/:id/remediation-history
POST   /api/v1/vulnerabilities/:id/resolve</pre>

        <h3>Pagination & Filtering</h3>
        <pre>GET /api/v1/vulnerabilities?page=2&per_page=50&sort=-severity

Response:
{
    "data": [...],
    "meta": {
        "page": 2,
        "per_page": 50,
        "total_pages": 100,
        "total_count": 5000
    },
    "links": {
        "self": "/api/v1/vulnerabilities?page=2",
        "next": "/api/v1/vulnerabilities?page=3",
        "prev": "/api/v1/vulnerabilities?page=1"
    }
}</pre>

        <h2>Data Modeling</h2>

        <h3>Relational (MySQL)</h3>
        <ul>
            <li>Use for transactional data</li>
            <li>Enforce referential integrity</li>
            <li>ACID compliance for workflows</li>
        </ul>

        <h3>Analytical (SingleStore/Columnar)</h3>
        <ul>
            <li>Optimized for aggregations</li>
            <li>Fast scans of large datasets</li>
            <li>Time-series data</li>
        </ul>

        <h3>NoSQL Considerations</h3>
        <ul>
            <li><strong>Document Store (MongoDB):</strong> Flexible schema for varied tool outputs</li>
            <li><strong>Key-Value (Redis):</strong> Caching, session storage</li>
            <li><strong>Time-Series (InfluxDB):</strong> Metrics and monitoring</li>
        </ul>

        <h2>CAP Theorem</h2>

        <h3>Trade-offs</h3>
        <ul>
            <li><strong>Consistency:</strong> All nodes see same data</li>
            <li><strong>Availability:</strong> Every request gets a response</li>
            <li><strong>Partition Tolerance:</strong> System works despite network failures</li>
        </ul>

        <h3>For Vulnerability Management</h3>
        <ul>
            <li>Choose <strong>CP</strong> for critical workflow state (consistency)</li>
            <li>Choose <strong>AP</strong> for analytics dashboards (availability)</li>
        </ul>

        <h2>Common Interview Questions</h2>
        <ol>
            <li><strong>Design a URL shortener (bit.ly).</strong></li>
            <li><strong>Design a rate limiter.</strong></li>
            <li><strong>Design a notification system.</strong></li>
            <li><strong>How would you handle 10x traffic spike?</strong></li>
            <li><strong>Design a data aggregation pipeline for 150 sources.</strong></li>
            <li><strong>Explain eventual consistency vs strong consistency.</strong></li>
            <li><strong>How would you implement real-time vulnerability alerts?</strong></li>
            <li><strong>Design a caching layer for vulnerability data.</strong></li>
        </ol>

        <a href="index.html" class="back-btn">â† Back to Index</a>
    </div>
</body>

</html>